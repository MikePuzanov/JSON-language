# JSON-language

<a href="https://github.com/MikePuzanov/JSON-language/actions/workflows/cmake.yml"><img src="https://github.com/MikePuzanov/JSON-language/actions/workflows/cmake.yml/badge.svg?branch=master" alt="Build Status"></a>

Репозитирий предоставляет сервер для записи и получение различной информации в виде JSON, а также библиотеку для интеграции с сервером и локольного взаимодействия с информацией в виде JSON.

## Cервер
При начале боевой работы очистите 
В директории json-server есть файл для конфигурации `serverConfig.json`, в котором можно настроить `ip` и `port` для сервера.
В директории json-server есть файл `galaxy.json`, в который сохраняются данный, которые лежат на сервере. В данный момент сохранение поддерживаются в следущем виде:

Windows:
- При закрытие терменила, в котором запущем сервис с помощью комбинации `Ctrl+Break`
- При полном закрытие окна терминал, с работающим сервисом
- Раз в 5 минут на сервере запускается job-a, которая записывает данный из галактика в `galaxy.json`

Linux:
- При полном закрытие окна терминал, с работающим сервисом
- Раз в 5 минут на сервере запускается job-a, которая записывает данный из галактика в `galaxy.json`

### Linux

#### Запуск (В данном запуске используются данные из файла `serverConfig.json`) {#ЗапускСерверLinux}

1. Убедитесь, что у вас установлен CMake и компилятор C++.
2. Клонируйте репозиторий
3. Перейдите в директорию с проектом: `cd json-server`
4. Создайте директорию для сборки: `mkdir build && cd build`
5. Соберите проект: `cmake .. && make`
6. Запустите сервер из директории json-server: `./build/json-server`
   
Дополнительно:

6.1 Запустите сервер из директории json-server: `./build/json-server ip port`, где надо указать `ip` и `port` вручную в терминале.

#### Тестирование

1. Убедитесь, что вы создали директорию для сборки проекта: `mkdir build && cd build`
2. Убедитесь, что вы уже собрали проект: `cmake .. && make`
3. Запустите проект  из директории json-server: `./build/json-server`
4. Откройте еще одно окно терминала
5. Перейдите в /tests : `cd json-server/build/json-server/tests`
6. Запустите тесты: `./tests`

### Windows

#### Запуск (В данном запуске используются данные из файла `serverConfig.json`) {#ЗапускСерверWindows}

1. Убедитесь, что у вас установлен CMake и компилятор C++.
2. Клонируйте репозиторий
3. Перейдите в директорию с проектом: `cd json-server`
4. Создайте директорию для сборки и перейдите в нее: `mkdir build`, `cd build`
5. Соберите проект: `cmake ..`, `cmake --build .`
6. Запустите сервер из директории json-server: `./build/Debug/json-server.exe`

Дополнительно:

6.1 Запустите сервер из директории json-server: `./build/Debug/json-server.exe`, где надо указать `ip` и `port` вручную в терминале.

#### Тестирование

1. Убедитесь, что вы создали директорию для сборки проекта  и перешли в нее: `mkdir build`,`cd build`
2. Убедитесь, что вы уже собрали проект:: `cmake ..`, `cmake --build .`
3. Запустите проект из директории json-server: `./buildDebug/json-server.exe`
4. Откройте еще одно окно терминала
5. Перейдите в /tests : `cd json-server/build/json-server/tests`
6. Запустите тесты: `./Debug/tests.exe`

## Использование

### Добавление JSON-записи

Чтобы добавить новую запись, отправьте POST-запрос на эндпоинт `/add` с JSON-телом, содержащим набор команд куда мы хотим добавить и что хотим добавить. Пример:

```bash
curl -X POST -H "Content-Type: application/json" -d '[["one"], [1, "zs", {"v":"ret","hl":1}]]' http://your-server-address/add
```
В данном примере запишется:
```
{
  "one" : [1, "zs", {"v":"ret","hl":1}]
}
```

Ожидаемый успешный ответ:`{ "status": "success" }`

### Получение JSON-записи

Чтобы получить значение по ключу, отправьте POST-запрос на эндпоинт `/get` с JSON-телом, содержащим набор команд до поля или массива, которое хотим получить. Пример:

```bash
curl -X POST -H "Content-Type: application/json" -d '["one", 2]' http://your-server-address/get
```
Если будем опираться на пример с добавление, то мы хотим получим "zs"

### Postman
Также для отправки запросов можете использовать удобную утилиту Postman.

## Библиотека
### Linux

#### Запуск

1. Убедитесь, что у вас установлен CMake и компилятор C++.
2. Клонируйте репозиторий
3. Перейдите в директорию с проектом: `cd library`
4. Создайте директорию для сборки: `mkdir build && cd build`
5. Соберите проект: `cmake .. && make`

#### Тестирование

1. Запустите cервер, смотрите [раздел Сервер](#ЗапускСерверLinux).
2. Откройте еще одно окно терминала
3. Убедитесь, что вы создали директорию для сборки проекта и перешли в нее, находясь в library: `mkdir build && cd build`
4. Убедитесь, что вы уже собрали проект: `cmake .. && make`
5. Перейдите в /tests : `cd library/build/library/tests`
6. Запустите тесты: `./tests`

### Windows

#### Запуск

1. Убедитесь, что у вас установлен CMake и компилятор C++. 
2. Клонируйте репозиторий
3. Перейдите в директорию с проектом: `cd library`
4. Создайте директорию для сборки и перейдите в нее: `mkdir build`, `cd build`
5. Соберите проект: `cmake ..`, `cmake --build .`

#### Тестирование

1. Запустите cервер, смотрите [раздел Сервер](#ЗапускСерверWindows).
2. Откройте еще одно окно терминала
3. Убедитесь, что вы создали директорию для сборки проекта и перешли в нее, находясь в library: `mkdir build`,`cd build`
4. Убедитесь, что вы уже собрали проект:: `cmake ..`, `cmake --build .`
5. Перейдите в /tests : `cd library/build/library/tests`
6. Запустите тесты: `./Debug/tests.exe`
